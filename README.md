# Lotus Маркетплейс

Lotus Маркетплейс — это веб-приложение, разработанное как дипломный проект. Оно представляет собой онлайн-площадку для просмотра, покупки и продажи товаров. Проект включает функционал регистрации, авторизации, корзины, избранного, истории покупок и админских операций.

## Основные функции
- **Регистрация и авторизация**: Пользователи могут создавать учетные записи и входить в систему с безопасным хэшированием паролей.
- **Просмотр товаров**: Товары разделены по категориям с поддержкой поиска, нечувствительного к регистру.
- **Корзина и избранное**: Пользователи могут добавлять товары в корзину или избранное, изменять их количество и оформлять заказы.
- **История покупок**: Отображение купленных товаров с датой и количеством.
- **Добавление товаров**: Пользователи могут добавлять новые товары для продажи.
- **Админские функции**: Пользователь с именем "admin" может удалять товары.
- **Загрузка аватара**: Пользователи могут загружать изображения профиля (PNG, JPG, JPEG).
- **Уведомления**: Flash-уведомления с анимацией для обратной связи.

## Технологии
- **Backend**: Python, Flask, Flask-Login, Flask-WTF, SQLite
- **Frontend**: HTML, CSS, JavaScript, Font Awesome
- **Безопасность**: Хэширование паролей (bcrypt), CSRF-защита, безопасный секретный ключ

## Установка
1. Клонируйте репозиторий:
   ```bash
   git clone <repository-url>
   cd lotus-marketplace
   ```
2. Создайте виртуальное окружение и активируйте его:
   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   venv\Scripts\activate     # Windows
   ```
3. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```
4. Убедитесь, что папка `static/image/avatars` существует и доступна для записи:
   ```bash
   mkdir -p static/image/avatars
   chmod -R 755 static/image/avatars
   ```
5. Запустите приложение:
   ```bash
   python main.py
   ```
6. Откройте браузер и перейдите по адресу: `http://127.0.0.1:5000`

## Требования
- Python 3.8+
- Зависимости (указаны в `requirements.txt`):
  ```text
  flask
  flask-login
  flask-wtf
  bcrypt
  email_validator
  ```

## Использование
1. **Регистрация**: Перейдите на `/register`, введите имя пользователя, email и пароль (минимум 8 символов, включая буквы, цифры и специальные символы).
2. **Вход**: Используйте `/login` для входа с email и паролем.
3. **Просмотр товаров**: На главной странице выберите категорию или используйте поиск.
4. **Корзина и избранное**: Добавляйте товары, изменяйте количество с помощью кнопок "+" и "−".
5. **Оформление заказа**: В корзине нажмите "Оформить заказ" для сохранения в истории покупок.
6. **Админ**: Создайте пользователя с именем "admin" для доступа к удалению товаров.
7. **Профиль**: Загружайте аватар и обновляйте имя пользователя.

## Структура базы данных
- **users**: Пользователи (id, username, email, password, avatar)
- **products**: Товары (id, name, category, price)
- **cart**: Корзина (id, user_email, product_id, quantity)
- **favorites**: Избранное (id, user_email, product_id, quantity)
- **purchases**: Покупки (id, user_email, item_name, purchase_date, quantity)

## Примечания
- Для существующих пользователей обновите пароли с помощью хэширования (см. `main.py`).
- Поиск нечувствителен к регистру благодаря `COLLATE NOCASE`.
- Flash-уведомления исчезают автоматически через 15 секунд.

## Автор
[Ваше имя]  
Дипломный проект, [год]